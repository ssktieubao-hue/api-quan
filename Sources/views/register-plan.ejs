<%- include('partials/head') %>

<%- include('partials/nav') %>

<div class="section" style="min-height: 90vh; padding-top: 4rem; background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);">
    <div class="container">
        <div style="text-align: center; margin-bottom: 4rem;">
            <h1 style="color: var(--main-color); font-size: 3rem; margin-bottom: 1rem; font-weight: bold;">
                GAMYW LẬU XUYÊN QUỐC GIA
            </h1>
            <p style="color: rgba(255,255,255,0.7); font-size: 1.2rem;">
                Chọn gói phù hợp với bạn
            </p>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; max-width: 1200px; margin: 0 auto;">
            <% 
            const pricingPlans = [
                { 
                    name: 'Basic', 
                    price: 'Free', 
                    period: '', 
                    highlight: false,
                    features: [
                        { text: 'Originals', del: false },
                        { text: 'Switch plans anytime', del: false },
                        { text: '65+ top Live', del: false },
                        { text: 'TV Channels', del: false },
                        { text: 'HD Video Quality', del: false }
                    ]
                },
                { 
                    name: 'Premium', 
                    price: '$15.99', 
                    period: '/month', 
                    highlight: true,
                    features: [
                        { text: 'Originals', del: false },
                        { text: 'Switch plans anytime', del: false },
                        { text: 'Full HD Video Quality', del: false },
                        { text: '65+ top Live', del: false },
                        { text: 'TV Channels', del: false }
                    ]
                },
                { 
                    name: 'VIP', 
                    price: '$35.99', 
                    period: '/month', 
                    highlight: false,
                    features: [
                        { text: 'Originals', del: false },
                        { text: 'Switch plans anytime', del: false },
                        { text: '65+ top Live', del: false },
                        { text: 'TV Channels', del: false },
                        { text: '4K Video Quality', del: false }
                    ]
                }
            ];
            
            pricingPlans.forEach((plan) => { %>
                <div style="background: rgba(255,255,255,0.05); 
                            padding: 2.5rem; 
                            border-radius: 20px; 
                            border: <%= plan.highlight ? '3px solid var(--main-color)' : '2px solid rgba(255,255,255,0.1)' %>;
                            transition: all 0.3s;
                            position: relative;
                            backdrop-filter: blur(10px);
                            <%= plan.highlight ? 'transform: scale(1.05); box-shadow: 0 10px 40px rgba(0,0,0,0.5);' : '' %>"
                     onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 10px 40px rgba(0,0,0,0.5)'"
                     onmouseout="this.style.transform='<%= plan.highlight ? 'scale(1.05)' : 'scale(1)' %>'; this.style.boxShadow='<%= plan.highlight ? '0 10px 40px rgba(0,0,0,0.5)' : 'none' %>'">
                    
                    <% if (plan.highlight) { %>
                        <div style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
                                    background: var(--main-color); 
                                    color: #fff; 
                                    padding: 0.5rem 1.5rem; 
                                    border-radius: 20px; 
                                    font-size: 0.9rem; 
                                    font-weight: bold;">
                            PHỔ BIẾN NHẤT
                        </div>
                    <% } %>

                    <div style="text-align: center; margin-bottom: 2rem;">
                        <h2 style="color: #fff; font-size: 2rem; margin-bottom: 1rem; font-weight: bold;">
                            <%= plan.name %>
                        </h2>
                        <div style="display: flex; align-items: baseline; justify-content: center; gap: 0.5rem;">
                            <span style="color: var(--main-color); font-size: 2.5rem; font-weight: bold;">
                                <%= plan.price %>
                            </span>
                            <% if (plan.period) { %>
                                <span style="color: rgba(255,255,255,0.7); font-size: 1.2rem;">
                                    <%= plan.period %>
                                </span>
                            <% } %>
                        </div>
                    </div>

                    <div style="margin-bottom: 2rem;">
                        <% plan.features.forEach((feature) => { %>
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem; color: #fff;">
                                <% if (feature.del) { %>
                                    <i class="bx bx-x" style="font-size: 1.5rem; color: rgba(255,255,255,0.3);"></i>
                                    <span style="text-decoration: line-through; opacity: 0.5;"><%= feature.text %></span>
                                <% } else { %>
                                    <i class="bx bx-check" style="font-size: 1.5rem; color: var(--main-color);"></i>
                                    <span><%= feature.text %></span>
                                <% } %>
                            </div>
                        <% }); %>
                    </div>

                    <button type="button" 
                            class="btn btn-hover plan-select-btn" 
                            data-plan="<%= plan.name.toLowerCase() %>"
                            style="width: 100%; 
                                   padding: 1rem; 
                                   font-size: 1.1rem; 
                                   font-weight: bold;
                                   background: <%= plan.highlight ? 'var(--main-color)' : 'rgba(255,255,255,0.1)' %>;
                                   border: <%= plan.highlight ? '2px solid var(--main-color)' : '2px solid rgba(255,255,255,0.3)' %>;">
                        <span>ĐĂNG KÝ NGAY</span>
                    </button>
                </div>
            <% }); %>
        </div>

        <!-- Registration Form Modal -->
        <div id="registerModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                                        background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;">
            <div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); 
                        padding: 3rem; 
                        border-radius: 20px; 
                        max-width: 500px; 
                        width: 90%; 
                        border: 2px solid var(--main-color);
                        position: relative;">
                <button onclick="closeModal()" style="position: absolute; top: 1rem; right: 1rem; 
                                                      background: transparent; border: none; 
                                                      color: #fff; font-size: 2rem; cursor: pointer;">
                    <i class="bx bx-x"></i>
                </button>
                
                <h2 style="color: var(--main-color); margin-bottom: 2rem; text-align: center; font-size: 2rem;">
                    Đăng Ký Gói <span id="planName"></span>
                </h2>
                
                <% if (typeof error !== 'undefined' && error) { %>
                    <div style="background: rgba(255, 0, 0, 0.2); color: #ff6b6b; padding: 1rem; border-radius: 5px; margin-bottom: 1.5rem; border-left: 4px solid #ff6b6b;">
                        <%= error %>
                    </div>
                <% } %>

                <form method="POST" action="/register-plan" id="planRegisterForm">
                    <input type="hidden" name="plan" id="selectedPlan" value="">
                    
                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; color: #fff; margin-bottom: 0.5rem; font-weight: 500;">Họ và tên</label>
                        <input 
                            type="text" 
                            name="TenKH" 
                            required 
                            style="width: 100%; padding: 0.75rem; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 5px; background: rgba(255, 255, 255, 0.1); color: #fff; font-size: 1rem;"
                            placeholder="Nhập họ và tên"
                        >
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; color: #fff; margin-bottom: 0.5rem; font-weight: 500;">Email</label>
                        <input 
                            type="email" 
                            name="Email" 
                            required 
                            style="width: 100%; padding: 0.75rem; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 5px; background: rgba(255, 255, 255, 0.1); color: #fff; font-size: 1rem;"
                            placeholder="Nhập email của bạn"
                        >
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; color: #fff; margin-bottom: 0.5rem; font-weight: 500;">Tên đăng nhập</label>
                        <input 
                            type="text" 
                            name="TenDangNhap" 
                            required 
                            style="width: 100%; padding: 0.75rem; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 5px; background: rgba(255, 255, 255, 0.1); color: #fff; font-size: 1rem;"
                            placeholder="Nhập tên đăng nhập"
                        >
                    </div>

                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; color: #fff; margin-bottom: 0.5rem; font-weight: 500;">Mật khẩu</label>
                        <input 
                            type="password" 
                            name="MatKhau" 
                            required 
                            minlength="6"
                            style="width: 100%; padding: 0.75rem; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 5px; background: rgba(255, 255, 255, 0.1); color: #fff; font-size: 1rem;"
                            placeholder="Nhập mật khẩu (ít nhất 6 ký tự)"
                        >
                    </div>

                    <div style="margin-bottom: 2rem;">
                        <label style="display: block; color: #fff; margin-bottom: 0.5rem; font-weight: 500;">Xác nhận mật khẩu</label>
                        <input 
                            type="password" 
                            name="MatKhauXacNhan" 
                            required 
                            minlength="6"
                            style="width: 100%; padding: 0.75rem; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 5px; background: rgba(255, 255, 255, 0.1); color: #fff; font-size: 1rem;"
                            placeholder="Nhập lại mật khẩu"
                        >
                    </div>

                    <button 
                        type="submit" 
                        class="btn btn-hover" 
                        style="width: 100%; padding: 1rem; font-size: 1.1rem; font-weight: bold;"
                    >
                        <span>Đăng Ký</span>
                    </button>

                    <div style="text-align: center; color: rgba(255, 255, 255, 0.7); margin-top: 1.5rem;">
                        Đã có tài khoản? 
                        <a href="/login" style="color: var(--main-color); text-decoration: none; font-weight: 600;">Đăng nhập</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="/js/register-plan.js"></script>

<%- include('partials/footer', { footerMenus: [] }) %>
<%- include('partials/scripts') %>
